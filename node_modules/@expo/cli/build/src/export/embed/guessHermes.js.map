{"version":3,"sources":["../../../../src/export/embed/guessHermes.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nconst ASSUME_HERMES_IS_USED_BY_DEFAULT = true;\n\nfunction parseGradleProperties(content: string): Record<string, string> {\n  const result: Record<string, string> = {};\n  for (let line of content.split('\\n')) {\n    line = line.trim();\n    if (!line || line.startsWith('#')) {\n      continue;\n    }\n\n    const sepIndex = line.indexOf('=');\n    const key = line.substr(0, sepIndex);\n    const value = line.substr(sepIndex + 1);\n    result[key] = value;\n  }\n  return result;\n}\n\nexport function isAndroidUsingHermes(projectRoot: string) {\n  // Check gradle.properties from prebuild template\n  const gradlePropertiesPath = path.join(projectRoot, 'android', 'gradle.properties');\n  if (fs.existsSync(gradlePropertiesPath)) {\n    const props = parseGradleProperties(fs.readFileSync(gradlePropertiesPath, 'utf8'));\n    return props['hermesEnabled'] === 'true';\n  }\n\n  return ASSUME_HERMES_IS_USED_BY_DEFAULT;\n}\n\nexport function isIosUsingHermes(projectRoot: string) {\n  // Trying best to check ios native project if by chance to be consistent between app config\n\n  // Check ios/Podfile for \":hermes_enabled => true\"\n  const podfilePath = path.join(projectRoot, 'ios', 'Podfile');\n  if (fs.existsSync(podfilePath)) {\n    const content = fs.readFileSync(podfilePath, 'utf8');\n    return content.search(/^\\s*:hermes_enabled\\s*=>\\s*true,?\\s+/m) >= 0;\n  }\n\n  return ASSUME_HERMES_IS_USED_BY_DEFAULT;\n}\n"],"names":["isAndroidUsingHermes","isIosUsingHermes","ASSUME_HERMES_IS_USED_BY_DEFAULT","parseGradleProperties","content","result","line","split","trim","startsWith","sepIndex","indexOf","key","substr","value","projectRoot","gradlePropertiesPath","path","join","fs","existsSync","props","readFileSync","podfilePath","search"],"mappings":"AAAA;;;;;;;;;;;IAqBgBA,oBAAoB,MAApBA,oBAAoB;IAWpBC,gBAAgB,MAAhBA,gBAAgB;;;8DAhCjB,IAAI;;;;;;;8DACF,MAAM;;;;;;;;;;;AAEvB,MAAMC,gCAAgC,GAAG,IAAI,AAAC;AAE9C,SAASC,qBAAqB,CAACC,OAAe,EAA0B;IACtE,MAAMC,MAAM,GAA2B,EAAE,AAAC;IAC1C,KAAK,IAAIC,IAAI,IAAIF,OAAO,CAACG,KAAK,CAAC,IAAI,CAAC,CAAE;QACpCD,IAAI,GAAGA,IAAI,CAACE,IAAI,EAAE,CAAC;QACnB,IAAI,CAACF,IAAI,IAAIA,IAAI,CAACG,UAAU,CAAC,GAAG,CAAC,EAAE;YACjC,SAAS;QACX,CAAC;QAED,MAAMC,QAAQ,GAAGJ,IAAI,CAACK,OAAO,CAAC,GAAG,CAAC,AAAC;QACnC,MAAMC,GAAG,GAAGN,IAAI,CAACO,MAAM,CAAC,CAAC,EAAEH,QAAQ,CAAC,AAAC;QACrC,MAAMI,KAAK,GAAGR,IAAI,CAACO,MAAM,CAACH,QAAQ,GAAG,CAAC,CAAC,AAAC;QACxCL,MAAM,CAACO,GAAG,CAAC,GAAGE,KAAK,CAAC;IACtB,CAAC;IACD,OAAOT,MAAM,CAAC;AAChB,CAAC;AAEM,SAASL,oBAAoB,CAACe,WAAmB,EAAE;IACxD,iDAAiD;IACjD,MAAMC,oBAAoB,GAAGC,KAAI,EAAA,QAAA,CAACC,IAAI,CAACH,WAAW,EAAE,SAAS,EAAE,mBAAmB,CAAC,AAAC;IACpF,IAAII,GAAE,EAAA,QAAA,CAACC,UAAU,CAACJ,oBAAoB,CAAC,EAAE;QACvC,MAAMK,KAAK,GAAGlB,qBAAqB,CAACgB,GAAE,EAAA,QAAA,CAACG,YAAY,CAACN,oBAAoB,EAAE,MAAM,CAAC,CAAC,AAAC;QACnF,OAAOK,KAAK,CAAC,eAAe,CAAC,KAAK,MAAM,CAAC;IAC3C,CAAC;IAED,OAAOnB,gCAAgC,CAAC;AAC1C,CAAC;AAEM,SAASD,gBAAgB,CAACc,WAAmB,EAAE;IACpD,2FAA2F;IAE3F,kDAAkD;IAClD,MAAMQ,WAAW,GAAGN,KAAI,EAAA,QAAA,CAACC,IAAI,CAACH,WAAW,EAAE,KAAK,EAAE,SAAS,CAAC,AAAC;IAC7D,IAAII,GAAE,EAAA,QAAA,CAACC,UAAU,CAACG,WAAW,CAAC,EAAE;QAC9B,MAAMnB,OAAO,GAAGe,GAAE,EAAA,QAAA,CAACG,YAAY,CAACC,WAAW,EAAE,MAAM,CAAC,AAAC;QACrD,OAAOnB,OAAO,CAACoB,MAAM,yCAAyC,IAAI,CAAC,CAAC;IACtE,CAAC;IAED,OAAOtB,gCAAgC,CAAC;AAC1C,CAAC"}